{"ast":null,"code":"var _jsxFileName = \"/Users/william.pansky/www/hsclone/src/pages/login.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { Component } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport Layout from 'components/MyLayout';\nimport { login } from 'utils/auth';\n\nclass Login extends Component {\n  static getInitialProps({\n    req\n  }) {\n    const protocol = false ? 'https' : 'http';\n    const apiUrl = false ? `${protocol}://${window.location.host}/login.js` : `${protocol}://${req.headers.host}/login.js`;\n    return {\n      apiUrl\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      error: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      username: event.target.value\n    });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    const username = this.state.username;\n    const url = this.props.apiUrl;\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username\n        })\n      });\n\n      if (response.ok) {\n        const {\n          token\n        } = await response.json();\n        login({\n          token\n        });\n      } else {\n        console.log('Login failed.'); // https://github.com/developit/unfetch#caveats\n\n        let error = new Error(response.statusText);\n        error.response = response;\n        return Promise.reject(error);\n      }\n    } catch (error) {\n      console.error('You have an error in your code or there are Network issues.', error);\n      throw new Error(error);\n    }\n  }\n\n  render() {\n    return __jsx(Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"jsx-923656326\" + \" \" + \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, __jsx(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: \"jsx-923656326\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, __jsx(\"label\", {\n      htmlFor: \"username\",\n      className: \"jsx-923656326\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"GitHub username\"), __jsx(\"input\", {\n      type: \"text\",\n      id: \"username\",\n      name: \"username\",\n      value: this.state.username,\n      onChange: this.handleChange,\n      className: \"jsx-923656326\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), __jsx(\"button\", {\n      type: \"submit\",\n      className: \"jsx-923656326\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"Login\"), __jsx(\"p\", {\n      className: \"jsx-923656326\" + \" \" + `error ${this.state.error && 'show'}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, this.state.error && `Error: ${this.state.error}`))), __jsx(_JSXStyle, {\n      id: \"923656326\",\n      __self: this\n    }, \".login.jsx-923656326{max-width:340px;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}form.jsx-923656326{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}label.jsx-923656326{font-weight:600;}input.jsx-923656326{padding:8px;margin:0.3rem 0 1rem;border:1px solid #ccc;border-radius:4px;}.error.jsx-923656326{margin:0.5rem 0 0;display:none;color:brown;}.error.show.jsx-923656326{display:block;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy93aWxsaWFtLnBhbnNreS93d3cvaHNjbG9uZS9zcmMvcGFnZXMvbG9naW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZ0ZvQixBQUc2QixBQU9ILEFBSUcsQUFHSixBQU1NLEFBS0osWUFWTyxFQVd2QixFQXpCZ0IsQUFXaEIsRUFTZSxZQW5CQSxDQW9CRCxFQU5VLFVBYkEsQUFvQnhCLFlBTm9CLFVBYkEsUUFjcEIsQ0FWbUIsU0FIbkIsc0RBSUEiLCJmaWxlIjoiL1VzZXJzL3dpbGxpYW0ucGFuc2t5L3d3dy9oc2Nsb25lL3NyYy9wYWdlcy9sb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLXVuZmV0Y2gnO1xuaW1wb3J0IExheW91dCBmcm9tICdjb21wb25lbnRzL015TGF5b3V0JztcbmltcG9ydCB7IGxvZ2luIH0gZnJvbSAndXRpbHMvYXV0aCc7XG5cbmNsYXNzIExvZ2luIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIGdldEluaXRpYWxQcm9wcyh7IHJlcSB9KSB7XG4gICAgY29uc3QgcHJvdG9jb2wgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gJ2h0dHBzJyA6ICdodHRwJztcblxuICAgIGNvbnN0IGFwaVVybCA9IHByb2Nlc3MuYnJvd3NlclxuICAgICAgPyBgJHtwcm90b2NvbH06Ly8ke3dpbmRvdy5sb2NhdGlvbi5ob3N0fS9sb2dpbi5qc2BcbiAgICAgIDogYCR7cHJvdG9jb2x9Oi8vJHtyZXEuaGVhZGVycy5ob3N0fS9sb2dpbi5qc2A7XG5cbiAgICByZXR1cm4geyBhcGlVcmwgfTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuXG4gICAgdGhpcy5zdGF0ZSA9IHsgdXNlcm5hbWU6ICcnLCBlcnJvcjogJycgfTtcbiAgICB0aGlzLmhhbmRsZUNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVTdWJtaXQgPSB0aGlzLmhhbmRsZVN1Ym1pdC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgaGFuZGxlQ2hhbmdlKGV2ZW50KSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IHVzZXJuYW1lOiBldmVudC50YXJnZXQudmFsdWUgfSk7XG4gIH1cblxuICBhc3luYyBoYW5kbGVTdWJtaXQoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHVzZXJuYW1lID0gdGhpcy5zdGF0ZS51c2VybmFtZTtcbiAgICBjb25zdCB1cmwgPSB0aGlzLnByb3BzLmFwaVVybDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgdXNlcm5hbWUgfSlcbiAgICAgIH0pO1xuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IHsgdG9rZW4gfSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgbG9naW4oeyB0b2tlbiB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdMb2dpbiBmYWlsZWQuJyk7XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kZXZlbG9waXQvdW5mZXRjaCNjYXZlYXRzXG4gICAgICAgIGxldCBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICAgICAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ1lvdSBoYXZlIGFuIGVycm9yIGluIHlvdXIgY29kZSBvciB0aGVyZSBhcmUgTmV0d29yayBpc3N1ZXMuJyxcbiAgICAgICAgZXJyb3JcbiAgICAgICk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPExheW91dD5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2dpblwiPlxuICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLmhhbmRsZVN1Ym1pdH0+XG4gICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInVzZXJuYW1lXCI+R2l0SHViIHVzZXJuYW1lPC9sYWJlbD5cblxuICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgaWQ9XCJ1c2VybmFtZVwiXG4gICAgICAgICAgICAgIG5hbWU9XCJ1c2VybmFtZVwiXG4gICAgICAgICAgICAgIHZhbHVlPXt0aGlzLnN0YXRlLnVzZXJuYW1lfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17dGhpcy5oYW5kbGVDaGFuZ2V9XG4gICAgICAgICAgICAvPlxuXG4gICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj5Mb2dpbjwvYnV0dG9uPlxuXG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9e2BlcnJvciAke3RoaXMuc3RhdGUuZXJyb3IgJiYgJ3Nob3cnfWB9PlxuICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5lcnJvciAmJiBgRXJyb3I6ICR7dGhpcy5zdGF0ZS5lcnJvcn1gfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgICAubG9naW4ge1xuICAgICAgICAgICAgbWF4LXdpZHRoOiAzNDBweDtcbiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgICAgcGFkZGluZzogMXJlbTtcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvcm0ge1xuICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgIGZsZXgtZmxvdzogY29sdW1uO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsYWJlbCB7XG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbnB1dCB7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHg7XG4gICAgICAgICAgICBtYXJnaW46IDAuM3JlbSAwIDFyZW07XG4gICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgIH1cbiAgICAgICAgICAuZXJyb3Ige1xuICAgICAgICAgICAgbWFyZ2luOiAwLjVyZW0gMCAwO1xuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgICAgIGNvbG9yOiBicm93bjtcbiAgICAgICAgICB9XG4gICAgICAgICAgLmVycm9yLnNob3cge1xuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgfVxuICAgICAgICBgfTwvc3R5bGU+XG4gICAgICA8L0xheW91dD5cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExvZ2luO1xuIl19 */\\n/*@ sourceURL=/Users/william.pansky/www/hsclone/src/pages/login.js */\"));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/william.pansky/www/hsclone/src/pages/login.js"],"names":["Component","fetch","Layout","login","Login","getInitialProps","req","protocol","apiUrl","window","location","host","headers","constructor","props","state","username","error","handleChange","bind","handleSubmit","event","setState","target","value","preventDefault","url","response","method","body","JSON","stringify","ok","token","json","console","log","Error","statusText","Promise","reject","render"],"mappings":"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","sourcesContent":["import { Component } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport Layout from 'components/MyLayout';\nimport { login } from 'utils/auth';\n\nclass Login extends Component {\n  static getInitialProps({ req }) {\n    const protocol = process.env.NODE_ENV === 'production' ? 'https' : 'http';\n\n    const apiUrl = process.browser\n      ? `${protocol}://${window.location.host}/login.js`\n      : `${protocol}://${req.headers.host}/login.js`;\n\n    return { apiUrl };\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = { username: '', error: '' };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({ username: event.target.value });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    const username = this.state.username;\n    const url = this.props.apiUrl;\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username })\n      });\n      if (response.ok) {\n        const { token } = await response.json();\n        login({ token });\n      } else {\n        console.log('Login failed.');\n        // https://github.com/developit/unfetch#caveats\n        let error = new Error(response.statusText);\n        error.response = response;\n        return Promise.reject(error);\n      }\n    } catch (error) {\n      console.error(\n        'You have an error in your code or there are Network issues.',\n        error\n      );\n      throw new Error(error);\n    }\n  }\n\n  render() {\n    return (\n      <Layout>\n        <div className=\"login\">\n          <form onSubmit={this.handleSubmit}>\n            <label htmlFor=\"username\">GitHub username</label>\n\n            <input\n              type=\"text\"\n              id=\"username\"\n              name=\"username\"\n              value={this.state.username}\n              onChange={this.handleChange}\n            />\n\n            <button type=\"submit\">Login</button>\n\n            <p className={`error ${this.state.error && 'show'}`}>\n              {this.state.error && `Error: ${this.state.error}`}\n            </p>\n          </form>\n        </div>\n        <style jsx>{`\n          .login {\n            max-width: 340px;\n            margin: 0 auto;\n            padding: 1rem;\n            border: 1px solid #ccc;\n            border-radius: 4px;\n          }\n          form {\n            display: flex;\n            flex-flow: column;\n          }\n          label {\n            font-weight: 600;\n          }\n          input {\n            padding: 8px;\n            margin: 0.3rem 0 1rem;\n            border: 1px solid #ccc;\n            border-radius: 4px;\n          }\n          .error {\n            margin: 0.5rem 0 0;\n            display: none;\n            color: brown;\n          }\n          .error.show {\n            display: block;\n          }\n        `}</style>\n      </Layout>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}